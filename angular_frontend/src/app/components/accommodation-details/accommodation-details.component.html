<ng-container *ngIf="invalidAccommodation" id="invalid-accommodation-container">
    <h1 class="text-orange-700 text-3xl">Error 404 Not Found: Invalid Accommodation ID Provided</h1>
  </ng-container>
  
  <ng-container *ngIf="invalidUserId || userNotLogged">
    <h1 class="text-orange-700 text-3xl">Error 401 Unauthorized: Need to be Logged-in with a lecit account</h1>
  </ng-container>
  
  <ng-container *ngIf="!invalidAccommodation && !invalidUserId && !userNotLogged" id="accommodation-details-container">
    <div class="flex flex-row">
      <div class="mx-2">{{accommodation.title}}</div>
      <div id="heart">
        <img class="w-10 cursor-pointer" *ngIf="isFavourite" src="/src/assets/icons/heart-full.png" (click)="toggleIsFavourite()" />
        <img class="w-10 cursor-pointer" *ngIf="!isFavourite" src="/src/assets/icons/heart-empty.png" (click)="toggleIsFavourite()" />      
      </div>
      <div *ngIf="isAdminOrMe" id="bin-icon" class="absolute right-20">
        <img class="w-10 cursor-pointer" src="/src/assets/icons/bin.png" (click)="deleteAccommodation()" />
      </div>
    </div>
    <div class="flex flex-row">
      <div>
        {{accommodation.city}}, {{accommodation.province}}, {{accommodation.country}}
      </div>
      <div *ngIf="isAdminOrMe">
        <img class="w-10 cursor-pointer" src="/src/assets/icons/pencil.png" (click)="toggleEditCityProvCountry()" />
      </div>
    </div>
    <div id="images" class="flex flex-row">
      <!-- -------------------------------------------------------------------------------------- -->
      <img id="biggest-image" [src]="accommodation.photos[0]" />

      <img src="/src/assets/icons/pencil.png" (click)="toggleEditPhotosPerspective()" class="absolute top-0 right-0 cursor-pointer" *ngIf="accommodation.photos.length === 1" id="pencil-one-image" />
      
      <div *ngIf="accommodation.photos.length > 1" id="other-images" class="flex flex-col">
        <div class="flex flex-row">
          <img id="image-oth1" [src]="accommodation.photos[1]" />
          <img src="/src/assets/icons/pencil.png" (click)="toggleEditPhotosPerspective()" class="absolute top-0 right-0 cursor-pointer" *ngIf="accommodation.photos.length === 2" id="pencil-two-images" />
          <div>
            <img id="image-oth2" [src]="accommodation.photos[2]" *ngIf="accommodation.photos.length > 2" />
            <img src="/src/assets/icons/pencil.png" (click)="toggleEditPhotosPerspective()" *ngIf="accommodation.photos.length >= 3" id="pencil-three-images" class="absolute top-0 right-0 cursor-pointer" />
          </div>
        </div>

        <div class="flex flex-row" *ngIf="accommodation.photos.length > 3">
          <img id="image-oth3" [src]="accommodation.photos[3]" />
          <div>
            <img id="image-oth4" [src]="accommodation.photos[4]" *ngIf="accommodation.photos.length > 4" />
            <div class="cursor-pointer absolute bottom-0 right-0" (click)="toggleViewMorePhotosPerspective()" *ngIf="accommodation.photos.length > 5">{{("accommodation-card-details.view-more-photos" | translate)}}</div>
          </div>
        </div>
      </div>
      <!-- -------------------------------------------------------------------------------------- -->
    </div>
  </ng-container>
  
  <ng-container *ngIf="message">
    <button type="button" (click)="clearMessage()">clear</button>
    <br>
    <h1 class="text-blue-800">{{message}}</h1>
  </ng-container>
  
  <ng-template #editCityProvCountryTemplate>
    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
      <form #cityProvCountryForm="ngForm">
        <div class="flex flex-col items-center justify-center">
          <div class="flex flex-row">
            <label class="label-primary" for="city-input-popup">City: </label>
            <div>
              <input class="input-primary" [(ngModel)]="cityInputField" #cityInPopup="ngModel" id="city-input-popup" type="text" 
              [value]="accommodation.city ? accommodation.city : ('accommodation-card-details.city-placeholder-input-field' | translate)"
              pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" />
              <div class="error-message" *ngIf="cityInPopup.invalid && (!cityInPopup.pristine && cityInPopup.dirty) && cityInPopup.hasError('pattern')">
                {{"accommodation-card-details.city-input-field-error" | translate}}
              </div>
            </div>
          </div>

          <div class="flex flex-row">
            <label class="label-primary" for="cap-input-popup">CAP: </label>
            <div>
              <input class="input-primary" [(ngModel)]="CAPInputField" #CAPInPopup="ngModel" id="cap-input-popup" type="text" 
              [value]="accommodation.cap" pattern="[0-9]{5}+" required />
              <div class="error-message" *ngIf="CAPInPopup.invalid && (!CAPInPopup.pristine && CAPInPopup.dirty) && (CAPInPopup.hasError('pattern') || CAPInPopup.hasError('required'))">
                {{"accommodation-card-details.cap-input-field-error" | translate}}
              </div>
            </div>
          </div>

          <div class="flex flex-row">
            <label class="label-primary" for="street-input-popup">Street: </label>
            <div>
              <input class="input-primary" [(ngModel)]="streetInputField" #streetInPopup="ngModel" id="street-input-popup" type="text" 
              [value]="accommodation.street ? accommodation.street : ('accommodation-card-details.street-placeholder-input-field' | translate)"
              pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" />
              <div class="error-message" *ngIf="streetInPopup.invalid && (!streetInPopup.pristine && streetInPopup.dirty) && streetInPopup.hasError('pattern')">
                {{"accommodation-card-details.street-input-field-error" | translate}}
              </div>
            </div>
          </div>

          <div class="flex flex-row">
            <label class="label-primary" for="street-number-input-popup">Street Number: </label>
            <div>
              <input class="input-primary" [(ngModel)]="strNumInputField" #streetNumInPopup="ngModel" id="street-number-input-popup" type="text" 
              [value]="accommodation.streetNumber ? accommodation.streetNumber : ('accommodation-card-details.street-number-placeholder-input-field' | translate)"
              pattern="[0-9]+[/]?[a-zA-Z]?" />
              <div class="error-message" *ngIf="streetNumInPopup.invalid && (!streetNumInPopup.pristine && streetNumInPopup.dirty) && streetNumInPopup.hasError('pattern')">
                {{"accommodation-card-details.street-number-input-field-error" | translate}}
              </div>
            </div>
          </div>
  
          <div class="flex flex-row">
            <label class="label-primary" for="prov-input-popup">Province: </label>
            <div>
              <input class="input-primary" [(ngModel)]="provinceInputField" #provInPopup="ngModel" id="prov-input-popup" type="text" 
              [value]="accommodation.province ? accommodation.province : ('accommodation-card-details.province-placeholder-input-field' | translate)"
              pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" />
              <div class="error-message" *ngIf="provInPopup.invalid && (!provInPopup.pristine && provInPopup.dirty) && provInPopup.hasError('pattern')">
                {{"accommodation-card-details.province-input-field-error" | translate}}
              </div>
            </div>
          </div>
  
          <div class="flex flex-row">
            <label class="label-primary" for="country-input-popup">Country: </label>
            <div>
              <input class="input-primary" [(ngModel)]="countryInputField" #countryInPopup="ngModel" id="country-input-popup" type="text" [value]="accommodation.country" required pattern="^[a-zA-Z]+( [a-zA-Z]+)*$" />
              <div class="error-message" *ngIf="countryInPopup.invalid && (!countryInPopup.pristine && countryInPopup.dirty) && (countryInPopup.hasError('pattern') || countryInPopup.hasError('required'))">
                {{"accommodation-card-details.country-input-field-error" | translate}}
              </div>
            </div>
          </div>
  
          <div class="flex flex-row mt-6 items-center">
            <button class="btn-primary mr-2" type="button" (click)="toggleEditCityProvCountry()" >{{("accommodation-card-details.close-btn-city-prov-country-form" | translate)}}</button>
            <button class="btn-primary" type="button" (click)="confirmFormCityCountryProv()" >{{("accommodation-card-details.submit-btn-city-prov-country-form" | translate)}}</button>
          </div>
        </div>
      </form>
    </div>
  </ng-template>
  
  <ng-container *ngIf="showEditCityProvCountry">
    <ng-container *ngTemplateOutlet="editCityProvCountryTemplate"></ng-container>
  </ng-container>

  <ng-template #viewMorePhotos>
    
  </ng-template>

  <ng-container *ngIf="showViewMorePhotosPerspective">
    <ng-container *ngTemplateOutlet="viewMorePhotos"></ng-container>
  </ng-container>
  